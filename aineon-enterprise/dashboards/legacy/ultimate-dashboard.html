<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AINEON Ultimate Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: white;
            min-height: 100vh;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            border-bottom: 1px solid #334155;
            margin-bottom: 30px;
        }
        .title {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(90deg, #60a5fa 0%, #8b5cf6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .status-badge {
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9rem;
            background: #10b981;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .stat-card {
            background: rgba(30, 41, 59, 0.7);
            border: 1px solid #334155;
            border-radius: 12px;
            padding: 25px;
            backdrop-filter: blur(10px);
        }
        .stat-card h3 {
            color: #94a3b8;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }
        .stat-value {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .profit { color: #10b981; }
        .roi { color: #60a5fa; }
        .trades { color: #8b5cf6; }
        .risk { color: #f59e0b; }
        .control-panel {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        .chart-container {
            background: rgba(30, 41, 59, 0.7);
            border: 1px solid #334155;
            border-radius: 12px;
            padding: 20px;
            height: 400px;
        }
        .engine-controls {
            background: rgba(30, 41, 59, 0.7);
            border: 1px solid #334155;
            border-radius: 12px;
            padding: 20px;
        }
        .engine-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 20px;
        }
        .engine-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: #0f172a;
            border-radius: 8px;
            border: 1px solid #334155;
        }
        .engine-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }
        .status-dot.active {
            background: #10b981;
            animation: pulse 2s infinite;
        }
        .status-dot.inactive {
            background: #6b7280;
        }
        .toggle-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
            transition: opacity 0.3s;
        }
        .toggle-btn.start {
            background: #10b981;
            color: white;
        }
        .toggle-btn.stop {
            background: #ef4444;
            color: white;
        }
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        .feature-card {
            background: #0f172a;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #334155;
            text-align: center;
        }
        .feature-card.active {
            border-color: #10b981;
        }
        .logs {
            background: rgba(30, 41, 59, 0.7);
            border: 1px solid #334155;
            border-radius: 12px;
            padding: 20px;
            margin-top: 30px;
            max-height: 300px;
            overflow-y: auto;
        }
        .log-entry {
            padding: 10px;
            border-bottom: 1px solid #334155;
            font-family: monospace;
            font-size: 0.9rem;
        }
        .log-entry.success { color: #10b981; }
        .log-entry.error { color: #ef4444; }
        .log-entry.info { color: #60a5fa; }
        .log-entry.warning { color: #f59e0b; }
        .footer {
            text-align: center;
            padding: 30px 0;
            color: #94a3b8;
            border-top: 1px solid #334155;
            margin-top: 30px;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .connection-status {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }
        .connection-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }
        .connection-dot.connected { background: #10b981; }
        .connection-dot.disconnected { background: #ef4444; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div>
                <h1 class="title">íº€ AINEON Ultimate Dashboard</h1>
                <div class="connection-status">
                    <div class="connection-dot connected" id="connectionDot"></div>
                    <span id="connectionStatus">Connecting...</span>
                </div>
            </div>
            <div class="status-badge" id="statusBadge">LIVE</div>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <h3>Total Profit</h3>
                <div class="stat-value profit" id="profit">$1,523.67</div>
                <p>Lifetime earnings â€¢ <span id="profitChange">+2.34% today</span></p>
            </div>
            <div class="stat-card">
                <h3>Daily ROI</h3>
                <div class="stat-value roi" id="roi">2.34%</div>
                <p>Annualized: <span id="annualRoi">854.10%</span></p>
            </div>
            <div class="stat-card">
                <h3>Active Trades</h3>
                <div class="stat-value trades" id="activeTrades">12</div>
                <p>3 arbitrage â€¢ 5 MEV â€¢ 4 DEX</p>
            </div>
            <div class="stat-card">
                <h3>Risk Score</h3>
                <div class="stat-value risk" id="riskScore">8.2/10</div>
                <p>Low risk â€¢ <span id="riskLevel">Safe</span></p>
            </div>
        </div>

        <div class="control-panel">
            <div class="chart-container">
                <canvas id="profitChart"></canvas>
            </div>
            <div class="engine-controls">
                <h2>Engine Controls</h2>
                <div class="engine-list" id="engineList">
                    <!-- Engine controls will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <div class="features">
            <h2>Connected Systems</h2>
            <div class="features-grid" id="featuresGrid">
                <!-- Features will be populated by JavaScript -->
            </div>
        </div>

        <div class="logs">
            <h2>System Logs</h2>
            <div id="logEntries">
                <div class="log-entry info">[12:34:56] Dashboard initialized</div>
                <div class="log-entry success">[12:34:57] Connected to backend API</div>
                <div class="log-entry info">[12:35:00] Profit tracking started</div>
            </div>
        </div>

        <div class="footer">
            <p>AINEON Enterprise Trading System â€¢ Real-time Dashboard</p>
            <p>Backend: <span id="backendUrl">http://localhost:8080</span> â€¢ Dashboard: http://localhost:3000</p>
            <p>Auto-refreshing every 3 seconds â€¢ Last update: <span id="lastUpdate">12:35:00</span></p>
        </div>
    </div>

    <script>
        // State
        let state = {
            profit: 1523.67,
            connected: false,
            engines: {
                arbitrage: { name: 'Arbitrage Engine', active: true },
                mev: { name: 'MEV Bot', active: true },
                flashLoans: { name: 'Flash Loans', active: false },
                portfolio: { name: 'Portfolio Manager', active: true },
                risk: { name: 'Risk Manager', active: true },
                ai: { name: 'AI Optimizer', active: true }
            },
            features: [
                'Flash Loan Engine',
                'Multi-DEX Arbitrage', 
                'MEV Bot',
                'Portfolio Manager',
                'Risk Manager',
                'AI Optimizer',
                'Web3 Integration',
                'Smart Contracts'
            ],
            logs: [],
            chartData: []
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initChart();
            renderEngines();
            renderFeatures();
            connectToBackend();
            startAutoUpdates();
        });

        // Initialize Chart.js
        function initChart() {
            const ctx = document.getElementById('profitChart').getContext('2d');
            
            // Generate sample data
            const labels = [];
            const data = [];
            let currentProfit = 1400;
            
            for (let i = 0; i < 24; i++) {
                labels.push(`${i}:00`);
                currentProfit += Math.random() * 20 - 10;
                data.push(currentProfit);
            }

            state.chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Profit ($)',
                        data: data,
                        borderColor: '#10b981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#94a3b8',
                                callback: function(value) {
                                    return '$' + value;
                                }
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#94a3b8'
                            }
                        }
                    }
                }
            });
        }

        // Render engine controls
        function renderEngines() {
            const engineList = document.getElementById('engineList');
            engineList.innerHTML = '';
            
            Object.entries(state.engines).forEach(([key, engine]) => {
                const engineItem = document.createElement('div');
                engineItem.className = 'engine-item';
                
                engineItem.innerHTML = `
                    <div class="engine-info">
                        <div class="status-dot ${engine.active ? 'active' : 'inactive'}"></div>
                        <span>${engine.name}</span>
                    </div>
                    <button class="toggle-btn ${engine.active ? 'stop' : 'start'}" 
                            onclick="toggleEngine('${key}')">
                        ${engine.active ? 'Stop' : 'Start'}
                    </button>
                `;
                
                engineList.appendChild(engineItem);
            });
        }

        // Render features
        function renderFeatures() {
            const featuresGrid = document.getElementById('featuresGrid');
            featuresGrid.innerHTML = '';
            
            state.features.forEach(feature => {
                const featureCard = document.createElement('div');
                featureCard.className = 'feature-card';
                featureCard.textContent = feature;
                featuresGrid.appendChild(featureCard);
            });
        }

        // Connect to backend
        async function connectToBackend() {
            const endpoints = [
                'http://localhost:8080/health',
                'http://localhost:8080/api/health',
                'http://localhost:5000/health'
            ];

            for (const endpoint of endpoints) {
                try {
                    const response = await axios.get(endpoint, { timeout: 3000 });
                    log(`Connected to ${endpoint}`, 'success');
                    state.connected = true;
                    updateConnectionStatus();
                    document.getElementById('backendUrl').textContent = endpoint.replace('/health', '');
                    return true;
                } catch (error) {
                    log(`${endpoint} not available`, 'warning');
                }
            }

            state.connected = false;
            updateConnectionStatus();
            log('Running in demo mode - no backend connection', 'warning');
            return false;
        }

        // Toggle engine
        function toggleEngine(engine) {
            state.engines[engine].active = !state.engines[engine].active;
            log(`${state.engines[engine].name} ${state.engines[engine].active ? 'started' : 'stopped'}`, 'info');
            renderEngines();
        }

        // Auto-update data
        function startAutoUpdates() {
            // Update profit every 3 seconds
            setInterval(() => {
                if (state.connected) {
                    // Try to fetch real data
                    fetchRealData();
                } else {
                    // Update with mock data
                    updateMockData();
                }
                
                updateLastUpdate();
            }, 3000);

            // Update chart every 10 seconds
            setInterval(() => {
                if (state.chart) {
                    const newValue = state.chart.data.datasets[0].data[state.chart.data.datasets[0].data.length - 1] + (Math.random() * 20 - 10);
                    state.chart.data.datasets[0].data.push(newValue);
                    state.chart.data.labels.push(new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}));
                    
                    if (state.chart.data.datasets[0].data.length > 24) {
                        state.chart.data.datasets[0].data.shift();
                        state.chart.data.labels.shift();
                    }
                    
                    state.chart.update('none');
                }
            }, 10000);
        }

        // Fetch real data from backend
        async function fetchRealData() {
            try {
                const response = await axios.get('http://localhost:8080/profit');
                const data = response.data;
                
                state.profit = data.current_profit || data.total_profit || state.profit + (Math.random() * 2 - 1);
                updateDisplay();
                
                log('Updated from backend', 'success');
            } catch (error) {
                updateMockData();
            }
        }

        // Update mock data
        function updateMockData() {
            // Simulate profit changes
            const change = (Math.random() * 2 - 1);
            state.profit += change;
            
            // Randomly toggle engines (for demo)
            if (Math.random() > 0.95) {
                const engines = Object.keys(state.engines);
                const randomEngine = engines[Math.floor(Math.random() * engines.length)];
                state.engines[randomEngine].active = !state.engines[randomEngine].active;
                renderEngines();
            }
            
            updateDisplay();
        }

        // Update display
        function updateDisplay() {
            document.getElementById('profit').textContent = '$' + state.profit.toFixed(2);
            document.getElementById('profitChange').textContent = (state.profit > 1523.67 ? '+' : '') + ((state.profit - 1523.67) / 1523.67 * 100).toFixed(2) + '% today';
            
            const roi = 2.34 + (Math.random() * 0.2 - 0.1);
            document.getElementById('roi').textContent = roi.toFixed(2) + '%';
            document.getElementById('annualRoi').textContent = (roi * 365).toFixed(2) + '%';
            
            document.getElementById('activeTrades').textContent = Math.floor(12 + Math.random() * 5);
            document.getElementById('riskScore').textContent = (8.2 + Math.random() * 0.4 - 0.2).toFixed(1) + '/10';
        }

        // Update connection status
        function updateConnectionStatus() {
            const dot = document.getElementById('connectionDot');
            const status = document.getElementById('connectionStatus');
            const badge = document.getElementById('statusBadge');
            
            if (state.connected) {
                dot.className = 'connection-dot connected';
                status.textContent = 'Connected to backend';
                status.style.color = '#10b981';
                badge.textContent = 'LIVE';
                badge.style.background = '#10b981';
            } else {
                dot.className = 'connection-dot disconnected';
                status.textContent = 'Demo mode - Backend offline';
                status.style.color = '#f59e0b';
                badge.textContent = 'DEMO';
                badge.style.background = '#f59e0b';
            }
        }

        // Update last update time
        function updateLastUpdate() {
            const now = new Date();
            document.getElementById('lastUpdate').textContent = now.toLocaleTimeString();
        }

        // Add log entry
        function log(message, type = 'info') {
            const now = new Date();
            const time = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit', second:'2-digit'});
            
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry ${type}`;
            logEntry.textContent = `[${time}] ${message}`;
            
            const logEntries = document.getElementById('logEntries');
            logEntries.appendChild(logEntry);
            
            // Keep only last 20 entries
            while (logEntries.children.length > 20) {
                logEntries.removeChild(logEntries.firstChild);
            }
            
            // Auto-scroll to bottom
            logEntries.scrollTop = logEntries.scrollHeight;
        }

        // Try to reconnect every 30 seconds
        setInterval(connectToBackend, 30000);
    </script>
</body>
</html>
